<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Lịch sử đặt phòng</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container py-4">
  <%- include('../partials/header') %>

  <h3 class="mb-4 text-center">📖 Lịch sử đặt phòng</h3>

  <% if (!bookings || bookings.length === 0) { %>
    <div class="alert alert-info text-center">
      Bạn chưa có phiếu đặt phòng nào.
    </div>
  <% } else { %>
    <table class="table table-hover align-middle shadow-sm text-center">
      <thead class="table-light">
        <tr>
          <th>Trạng thái</th>
          <th>Tên phòng</th>
          <th>Ngày đặt</th>
          <th>Tổng tiền</th>
          <th>Chi tiết</th>
        </tr>
      </thead>
      <tbody>
        <% bookings.forEach(b => { %>
          <tr>
            <td>
              <% if (b.status === 'Đã đặt') { %>
                <span class="badge bg-primary">Đã đặt</span>
              <% } else if (b.status === 'Đã hủy') { %>
                <span class="badge bg-danger">Đã hủy</span>
              <% } else { %>
                <span class="badge bg-secondary"><%= b.status %></span>
              <% } %>
            </td>
            <td><%= b.Room.roomName %></td>
            <td><%= b.bookingDate %></td>
            <td><%= (b.Invoice?.amount || b.totalAmount).toLocaleString('vi-VN') %> ₫</td>
            <td>
              <a href="/customer/history/<%= b.bookingId %>" class="btn btn-sm btn-outline-primary">Xem chi tiết</a>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  <% } %>

  <a href="/" class="btn btn-secondary mt-3">&larr; Quay lại danh sách phòng</a>
  <%- include('../partials/footer') %>
</body>

</html>
