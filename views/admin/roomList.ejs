<%- include('../partials/header_admin') %>
    <!-- Main Content -->
    <div class="main-container">
        <!-- Page Header with Filter -->
        <div class="page-header">
            <h2 class="page-title">Qu·∫£n l√Ω b√†i ƒëƒÉng</h2>
            <form method="GET" action="/admin/rooms" class="filter-section">
                <label class="filter-label">L·ªçc theo tr·∫°ng th√°i:</label>
                <select name="status" class="filter-select" onchange="this.form.submit()">
                    <option value="">T·∫•t c·∫£</option>
                    <option value="Ch·ªù duy·ªát" <%=selectedStatus==='Ch·ªù duy·ªát' ? 'selected' : '' %>>‚è≥ Ch·ªù duy·ªát</option>
                    <option value="ƒê√£ duy·ªát" <%=selectedStatus==='ƒê√£ duy·ªát' ? 'selected' : '' %>>‚úÖ ƒê√£ duy·ªát</option>
                    <option value="T·ª´ ch·ªëi" <%=selectedStatus==='T·ª´ ch·ªëi' ? 'selected' : '' %>>‚ùå T·ª´ ch·ªëi</option>
                </select>
            </form>
        </div>

        <!-- Table -->
        <div class="table-container">
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>T√™n ph√≤ng</th>
                            <th>Nh√† cung c·∫•p</th>
                            <th>Gi√°</th>
                            <th>Tr·∫°ng th√°i</th>
                            <th>H√†nh ƒë·ªông</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% if (rooms.length===0) { %>
                            <tr>
                                <td colspan="5">
                                    <div class="empty-state">
                                        <div class="empty-state-icon">üì≠</div>
                                        <div class="empty-state-text">Kh√¥ng c√≥ b√†i ƒëƒÉng n√†o</div>
                                    </div>
                                </td>
                            </tr>
                            <% } else { %>
                                <% rooms.forEach(room=> { %>
                                    <tr>
                                        <td><strong>
                                                <%= room.roomName %>
                                            </strong></td>
                                        <td>
                                            <%= room.Provider ? room.Provider.providerName : 'N/A' %>
                                        </td>
                                        <td><span class="price">
                                                <%= room.price.toLocaleString('vi-VN') %> VNƒê
                                            </span></td>
                                        <td>
                                            <% if (room.approvalStatus==='Ch·ªù duy·ªát' ) { %>
                                                <span class="status-badge status-pending">Ch·ªù duy·ªát</span>
                                                <% } else if (room.approvalStatus==='ƒê√£ duy·ªát' ) { %>
                                                    <span class="status-badge status-approved">ƒê√£ duy·ªát</span>
                                                    <% } else if (room.approvalStatus==='T·ª´ ch·ªëi' ) { %>
                                                        <span class="status-badge status-rejected">T·ª´ ch·ªëi</span>
                                                        <% } %>
                                        </td>
                                        <td>
                                            <a href="/admin/rooms/<%= room.roomId %>" class="btn-view">Xem chi ti·∫øt</a>
                                            <button type="button" class="btn-delete"
                                                onclick='openDeleteModal(<%= room.roomId %>, "<%- room.roomName.replace(/"/g, "&quot;") %>")'>
                                                Xo√° b√†i ƒëƒÉng
                                            </button>
                                        </td>
                                    </tr>
                                    <% }) %>
                                        <% } %>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Include Delete Modal from admin folder -->
    <%- include('./delete_room_modal') %>
    <%- include('../partials/footer_admin') %>