<%- include('../partials/header_admin') %>
<link rel="stylesheet" href="/css/admin-room-detail.css"> <div class="detail-container">
    <a href="/admin/users" class="back-button">Quay l·∫°i danh s√°ch t√†i kho·∫£n</a>

    <div class="page-header-detail" style="background: linear-gradient(135deg, #4f46e5 0%, #6366f1 100%);">
        <h1 class="page-title-detail">üë§ Chi ti·∫øt t√†i kho·∫£n</h1>
    </div>

    <div class="detail-card">
        <div class="info-group">
            <span class="info-label">Th√¥ng tin t√†i kho·∫£n</span>
            <div class="provider-card" style="border-left-color: #4f46e5;">
                <div class="provider-info">
                    <div class="provider-item"><strong>ID T√†i kho·∫£n:</strong> <span><%= account.accountId %></span></div>
                    <div class="provider-item"><strong>Username:</strong> <span><%= account.username %></span></div>
                    <div class="provider-item"><strong>Vai tr√≤:</strong>
                        <span>
                            <% if (account.role === 1) { %> Nh√† cung c·∫•p <% } else { %> Kh√°ch h√†ng <% } %>
                        </span>
                    </div>
                     <div class="provider-item"><strong>Tr·∫°ng th√°i:</strong>
                        <span>
                             <% if (account.status === 'active') { %>
                                <span class="status-badge-large status-approved" style="background-color: #d1fae5; color: #065f46;">Ho·∫°t ƒë·ªông</span>
                            <% } else if (account.status === 'locked') { %>
                                <span class="status-badge-large status-pending" style="background-color: #fef3c7; color: #92400e;">B·ªã kh√≥a</span>
                            <% } else if (account.status === 'deleted') { %>
                                    <span class="status-badge-large status-rejected" style="background-color: #fee2e2; color: #991b1b;">ƒê√£ x√≥a</span>
                            <% } else { %>
                                <span class="status-badge-large"><%= account.status %></span>
                            <% } %>
                        </span>
                    </div>
                </div>
            </div>
        </div>

        <% if (account.Customer) { %>
            <div class="info-group">
                <span class="info-label">Th√¥ng tin Kh√°ch h√†ng</span>
                 <div class="provider-card" style="border-left-color: #64748b;">
                     <div class="provider-info">
                        <div class="provider-item"><strong>ID Kh√°ch h√†ng:</strong> <span><%= account.Customer.customerId %></span></div>
                        <div class="provider-item"><strong>H·ªç T√™n:</strong> <span><%= account.Customer.fullName %></span></div>
                        <div class="provider-item"><strong>Email:</strong> <span><%= account.Customer.email %></span></div>
                        <div class="provider-item"><strong>SƒêT:</strong> <span><%= account.Customer.phoneNumber %></span></div>
                        <div class="provider-item"><strong>CCCD:</strong> <span><%= account.Customer.identityNumber %></span></div>
                     </div>
                 </div>
            </div>
        <% } else if (account.Provider) { %>
            <div class="info-group">
                <span class="info-label">Th√¥ng tin Nh√† cung c·∫•p</span>
                 <div class="provider-card" style="border-left-color: #0ea5e9;">
                     <div class="provider-info">
                        <div class="provider-item"><strong>ID Nh√† CC:</strong> <span><%= account.Provider.providerId %></span></div>
                        <div class="provider-item"><strong>T√™n NCC:</strong> <span><%= account.Provider.providerName %></span></div>
                        <div class="provider-item"><strong>Email:</strong> <span><%= account.Provider.email %></span></div>
                        <div class="provider-item"><strong>SƒêT:</strong> <span><%= account.Provider.phoneNumber %></span></div>
                        <div class="provider-item"><strong>CCCD:</strong> <span><%= account.Provider.identityNumber %></span></div>
                        <div class="provider-item"><strong>M√£ s·ªë thu·∫ø:</strong> <span><%= account.Provider.taxCode || 'N/A' %></span></div>
                    </div>
                 </div>
            </div>
        <% } %>
    </div>

    <% if (account.status !== 'deleted') { %>
        <div class="action-section">
            <h3 class="action-title">H√†nh ƒë·ªông qu·∫£n l√Ω</h3>
            <div class="action-buttons">
                <% if (account.status === 'active') { %>
                    <form action="/admin/users/<%= account.accountId %>/lock" method="POST" onsubmit="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën KH√ìA t√†i kho·∫£n n√†y? Ng∆∞·ªùi d√πng s·∫Ω kh√¥ng th·ªÉ ƒëƒÉng nh·∫≠p.')">
                        <button type="submit" class="btn-reject" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); box-shadow: 0 4px 12px rgba(245, 158, 11, 0.2);">üîí Kh√≥a t√†i kho·∫£n</button>
                    </form>
                <% } else if (account.status === 'locked') { %>
                    <form action="/admin/users/<%= account.accountId %>/unlock" method="POST" onsubmit="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën M·ªû KH√ìA t√†i kho·∫£n n√†y?')">
                        <button type="submit" class="btn-approve">üîì M·ªü kh√≥a t√†i kho·∫£n</button>
                    </form>
                <% } %>

                <form action="/admin/users/<%= account.accountId %>/delete" method="POST" onsubmit="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën X√ìA t√†i kho·∫£n n√†y? H√†nh ƒë·ªông n√†y kh√¥ng th·ªÉ ho√†n t√°c tr√™n giao di·ªán.')">
                    <button type="submit" class="btn-reject">üóëÔ∏è X√≥a t√†i kho·∫£n</button>
                </form>
            </div>
        </div>
    <% } else { %>
         <div class="alert alert-danger text-center">T√†i kho·∫£n n√†y ƒë√£ b·ªã x√≥a.</div>
    <% } %>

</div>

<%- include('../partials/footer_admin') %>