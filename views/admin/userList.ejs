<%- include('../partials/header_admin') %>
<link rel="stylesheet" href="/css/admin-rooms.css"> <div class="main-container">
    <div class="page-header">
        <h2 class="page-title">üë• Qu·∫£n l√Ω t√†i kho·∫£n</h2>
        <form method="GET" action="/admin/users" class="filter-section">
            <label class="filter-label">L·ªçc theo tr·∫°ng th√°i:</label>
            <select name="status" class="filter-select" onchange="this.form.submit()">
                <option value="">T·∫•t c·∫£</option>
                <option value="active" <%= selectedStatus === 'active' ? 'selected' : '' %>>üü¢ Ho·∫°t ƒë·ªông</option>
                <option value="locked" <%= selectedStatus === 'locked' ? 'selected' : '' %>>üîí B·ªã kh√≥a</option>
                <option value="deleted" <%= selectedStatus === 'deleted' ? 'selected' : '' %>>üóëÔ∏è ƒê√£ x√≥a</option>
            </select>
        </form>
    </div>

    <div class="table-container">
        <div class="table-wrapper">
            <table>
                <thead>
                    <tr>
                        <th>Username (SƒêT/Email)</th>
                        <th>H·ªç T√™n / T√™n NCC</th>
                        <th>Vai tr√≤</th>
                        <th>Tr·∫°ng th√°i</th>
                        <th>H√†nh ƒë·ªông</th>
                    </tr>
                </thead>
                <tbody>
                    <% if (accounts.length === 0) { %>
                        <tr>
                            <td colspan="5">
                                <div class="empty-state">
                                    <div class="empty-state-icon">üö´</div>
                                    <div class="empty-state-text">Kh√¥ng c√≥ t√†i kho·∫£n n√†o</div>
                                </div>
                            </td>
                        </tr>
                    <% } else { %>
                        <% accounts.forEach(account => { %>
                            <tr>
                                <td><strong><%= account.username %></strong></td>
                                <td>
                                    <% if (account.Customer) { %>
                                        <%= account.Customer.fullName %>
                                    <% } else if (account.Provider) { %>
                                        <%= account.Provider.providerName %>
                                    <% } else { %>
                                        N/A
                                    <% } %>
                                </td>
                                <td>
                                    <% if (account.role === 1) { %>
                                        <span class="badge bg-primary">Nh√† cung c·∫•p</span>
                                    <% } else if (account.role === 2) { %>
                                        <span class="badge bg-secondary">Kh√°ch h√†ng</span>
                                    <% } %>
                                </td>
                                <td>
                                    <% if (account.status === 'active') { %>
                                        <span class="status-badge status-approved" style="background-color: #d1fae5; color: #065f46;">Ho·∫°t ƒë·ªông</span>
                                    <% } else if (account.status === 'locked') { %>
                                        <span class="status-badge status-pending" style="background-color: #fef3c7; color: #92400e;">B·ªã kh√≥a</span>
                                    <% } else if (account.status === 'deleted') { %>
                                         <span class="status-badge status-rejected" style="background-color: #fee2e2; color: #991b1b;">ƒê√£ x√≥a</span>
                                    <% } else { %>
                                        <span class="status-badge"><%= account.status %></span>
                                    <% } %>
                                </td>
                                <td>
                                    <a href="/admin/users/<%= account.accountId %>" class="btn-view">Xem chi ti·∫øt</a>
                                </td>
                            </tr>
                        <% }) %>
                    <% } %>
                </tbody>
            </table>
        </div>
    </div>
</div>

<%- include('../partials/footer_admin') %>