<%- include('../partials/header') %>

<main class="container py-5">
  <div class="card shadow-lg border-0 overflow-hidden">
    <div class="row g-0">
      <!-- H√¨nh ·∫£nh ph√≤ng (h·ªó tr·ª£ nhi·ªÅu ·∫£nh) -->
      <div class="col-md-6 position-relative">
        <% if (room.image) { const imgs=room.image.split(";").filter(i=>
        i.trim() !== ""); %>
        <div id="roomCarousel" class="carousel slide" data-bs-ride="carousel">
          <div class="carousel-inner">
            <% imgs.forEach((img, index)=> { %>
            <div class="carousel-item <%= index === 0 ? 'active' : '' %>">
              <img
                src="/<%= img %>"
                class="d-block w-100 room-image"
                alt="Room Image <%= index + 1 %>"
              />
            </div>
            <% }) %>
          </div>

          <!-- N√∫t ƒëi·ªÅu h∆∞·ªõng -->
          <% if (imgs.length> 1) { %>
          <button
            class="carousel-control-prev"
            type="button"
            data-bs-target="#roomCarousel"
            data-bs-slide="prev"
          >
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Tr∆∞·ªõc</span>
          </button>
          <button
            class="carousel-control-next"
            type="button"
            data-bs-target="#roomCarousel"
            data-bs-slide="next"
          >
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Ti·∫øp</span>
          </button>
          <% } %>
        </div>
        <% } else { %>
        <div class="text-center p-5 bg-light text-muted">
          <i class="fa-solid fa-image fa-3x mb-2"></i>
          <p>Ph√≤ng n√†y ch∆∞a c√≥ h√¨nh ·∫£nh.</p>
        </div>
        <% } %>
      </div>

      <!-- Th√¥ng tin chi ti·∫øt -->
      <div class="col-md-6 p-4 p-md-5 bg-light">
        <h2 class="text-uppercase fw-bold text-primary mb-4">
          <i class="fa-solid fa-bed me-2"></i>
          <%= room.roomName %>
        </h2>

        <ul class="list-unstyled mb-4">
          <li class="mb-2">
            <i class="fa-solid fa-location-dot text-danger me-2"></i>
            <strong>ƒê·ªãa ch·ªâ:</strong>
            <%= room.fullAddress %>
          </li>
          <li class="mb-2">
            <i class="fa-solid fa-user-group text-success me-2"></i>
            <strong>S·ª©c ch·ª©a:</strong>
            <%= room.capacity %> ng∆∞·ªùi
          </li>
          <li class="mb-2">
            <i class="fa-solid fa-coins text-warning me-2"></i>
            <strong>Gi√°:</strong>
            <%= room.price.toLocaleString() %> VND / ƒë√™m
          </li>
          <li class="mb-2">
            <i class="fa-solid fa-wifi text-info me-2"></i>
            <strong>Ti·ªán √≠ch:</strong>
            <%= room.amenities %>
          </li>
        </ul>

        <div class="mb-4">
          <h5 class="fw-bold text-secondary mb-2">
            <i class="fa-solid fa-info-circle me-2"></i> M√¥ t·∫£
          </h5>
          <p class="text-muted" style="line-height: 1.6">
            <%= room.description %>
          </p>
        </div>

        <hr />

        <div class="mb-4">
          <h5 class="fw-bold text-secondary mb-3">
            <i class="fa-solid fa-user-tie me-2"></i> Nh√† cung c·∫•p
          </h5>
          <div class="ps-2">
            <p class="mb-1">
              <strong>T√™n:</strong>
              <%=room.Provider?.providerName %>
            </p>
            <p class="mb-1">
              <strong>Email:</strong>
              <%=room.Provider?.email%>
            </p>
            <p class="mb-0">
              <strong>SƒêT:</strong>
              <%= room.Provider?.phoneNumber %>
            </p>
          </div>
        </div>

        <div class="d-flex gap-3 mt-4">
          <a href="/" class="btn btn-outline-secondary px-4">
            <i class="fa-solid fa-arrow-left me-2"></i> Quay l·∫°i
          </a>
          <a
            href="/customer/bookings/<%= room.roomId %>"
            class="btn btn-primary px-4"
          >
            <i class="fa-solid fa-calendar-check me-2"></i> ƒê·∫∑t ph√≤ng ngay
          </a>
        </div>
      </div>
    </div>
  </div>
</main>

<%- include('../partials/footer') %>

<style>
  .object-fit-cover {
    object-fit: cover;
    height: 100%;
  }

  .card {
    border-radius: 18px;
  }

  .btn-primary {
    background-color: #8b7d6b;
    border: none;
  }

  .btn-primary:hover {
    background-color: #a68f6a;
  }

  .btn-outline-secondary:hover {
    color: #fff;
    background-color: #6c757d;
  }

  .text-primary {
    color: #8b7d6b !important;
  }

  .room-image {
    width: 100%;
    height: 450px; /* üëà chi·ªÅu cao c·ªë ƒë·ªãnh c·ªßa khung ·∫£nh */
    object-fit: cover; /* üëà gi√∫p ·∫£nh ph·ªß to√†n khung m√† kh√¥ng m√©o */
    object-position: center; /* üëà canh gi·ªØa ·∫£nh */
    border-radius: 8px; /* üëà bo nh·∫π g√≥c n·∫øu mu·ªën */
  }

  /* Responsive cho ƒëi·ªán tho·∫°i */
  @media (max-width: 768px) {
    .room-image {
      height: 300px;
    }
  }
</style>
