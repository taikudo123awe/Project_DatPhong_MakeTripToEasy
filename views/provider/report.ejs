<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Báo cáo thống kê</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/report.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
  <div class="container report-container">
    <h2 class="mb-4">📊 Báo cáo thống kê</h2>

    <div class="summary-box mb-4">
      <h3>Hôm nay</h3>
      <p>Phòng đặt: <strong><%= totalPaidBookings %></strong></p>
      <p>Phòng trống: <strong><%= availableRooms %></strong></p>
      <p>Doanh thu: <strong><%= totalRevenueToday.toLocaleString() %> VNĐ</strong></p>
    </div>

    <div class="tabs">
      <span><strong>Thời gian:</strong></span>
      <a href="?type=week" class="<%= type === 'week' ? 'active' : '' %>">Tuần</a>
      <a href="?type=month" class="<%= type === 'month' ? 'active' : '' %>">Tháng</a>
      <a href="?type=year" class="<%= type === 'year' ? 'active' : '' %>">Năm</a>
    </div>

    <div class="chart-section">
      <h5><strong>Doanh thu theo thời gian</strong></h5>
      <canvas id="revenueChart"></canvas>
    </div>

    <div class="chart-section">
      <h5><strong>Doanh thu theo từng phòng</strong></h5>
      <canvas id="roomRevenueChart"></canvas>
    </div>

    <div class="chart-section">
      <h5><strong>Tình trạng phòng</strong></h5>
      <canvas id="roomStatusChart"></canvas>
    </div>
  </div>

  <script>
    window.reportData = {
      revenueData: <%- JSON.stringify(revenueData) %>,
      roomRevenue: <%- JSON.stringify(roomRevenue) %>,
      roomStatus: <%- JSON.stringify(roomStatus) %>,
    };
  </script>
  <script src="/js/report.js"></script>
</body>
</html>
