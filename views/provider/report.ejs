<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Báo cáo thống kê</title>

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/report.css">
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="bg-light">
  <div class="container report-container py-4">
    <h2 class="mb-4 fw-bold text-primary">📊 Báo cáo thống kê</h2>

    <div class="summary-box card p-3 shadow-sm mb-4">
      <h3 class="fw-semibold mb-3">Hôm nay</h3>
      <p>Phòng đặt: <strong><%= totalPaidBookings %></strong></p>
      <p>Phòng trống: <strong><%= availableRooms %></strong></p>
      <p>Doanh thu: <strong><%= totalRevenueToday.toLocaleString() %> VNĐ</strong></p>
    </div>

    <div class="tabs mb-4">
      <span class="fw-semibold">Thời gian:</span>
      <a href="?type=month" class="<%= type === 'month' ? 'active' : '' %>">Tháng</a>
      <a href="?type=year" class="<%= type === 'year' ? 'active' : '' %>">Năm</a>
      <a href="?type=all" class="<%= type === 'all' ? 'active' : '' %>">Tất cả năm</a>
    </div>

    <div class="chart-section mb-5">
      <h5 class="fw-bold">Doanh thu theo thời gian</h5>
      <canvas id="revenueChart" height="120"></canvas>
    </div>

    <div class="chart-section mb-5">
      <h5 class="fw-bold">Doanh thu theo từng phòng</h5>
      <canvas id="roomRevenueChart" height="120"></canvas>
    </div>

    <div class="chart-section mb-5">
      <h5 class="fw-bold">Tình trạng phòng</h5>
      <canvas id="roomStatusChart" height="120"></canvas>
    </div>
  </div>

  <script>
    window.reportData = {
      revenueData: <%- JSON.stringify(revenueData) %>,
      roomRevenue: <%- JSON.stringify(roomRevenue) %>,
      roomStatus: <%- JSON.stringify(roomStatus) %>
    };
  </script>

  <script src="/javascript/report.js"></script>
</body>
</html>
