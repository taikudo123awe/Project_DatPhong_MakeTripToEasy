<!DOCTYPE html>
<html>
<head>
  <title>Chỉnh sửa thông tin</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-4">
  <h2>Chỉnh sửa thông tin nhà cung cấp</h2>

  <form method="POST" action="/provider/edit-profile" enctype="multipart/form-data">
    
    <h4>Thông tin cơ bản</h4>
    <div class="mb-3">
      <label for="providerName" class="form-label">Tên nhà cung cấp</label>
      <input type="text" class="form-control" name="providerName" value="<%= provider.providerName %>" required>
    </div>
    <div class="mb-3">
      <label for="email" class="form-label">Email</label>
      <input type="email" class="form-control" name="email" value="<%= provider.email %>" required>
    </div>
    <div class="mb-3">
      <label for="phoneNumber" class="form-label">Số điện thoại</label>
      <input type="text" class="form-control" name="phoneNumber" value="<%= provider.phoneNumber %>" required>
    </div>
    <div class="mb-3">
      <label for="taxCode" class="form-label">Mã số thuế</label>
      <input type="text" class="form-control" name="taxCode" value="<%= provider.taxCode || '' %>">
    </div>

    <hr>
    
    <h4>Thông tin thanh toán</h4>
    <p class="text-muted">Chỉnh sửa thông tin thanh toán đầu tiên của bạn.</p>
    <div class="mb-3">
      <label for="bankName" class="form-label">Tên ngân hàng</label>
      <input type="text" class="form-control" name="bankName" value="<%= (paymentInfo && paymentInfo.bankName) ? paymentInfo.bankName : '' %>">
    </div>
    <div class="mb-3">
      <label for="accountHolder" class="form-label">Tên chủ tài khoản</label>
      <input type="text" class="form-control" name="accountHolder" value="<%= (paymentInfo && paymentInfo.accountHolder) ? paymentInfo.accountHolder : '' %>">
    </div>
    <div class="mb-3">
      <label for="accountNumber" class="form-label">Số tài khoản</label>
      <input type="text" class="form-control" name="accountNumber" value="<%= (paymentInfo && paymentInfo.accountNumber) ? paymentInfo.accountNumber : '' %>">
    </div>

    <div class="mb-3">
      <label for="qrCodeImage" class="form-label">Tải lên ảnh mã QR</label>
      <input type="file" class="form-control" name="qrCodeImage" id="qrCodeImage" accept="image/*">
      
      <% if (paymentInfo && paymentInfo.qrCode) { %>
        <div class="mt-2">
          <small>Ảnh QR hiện tại:</small><br>
          <img src="/<%= paymentInfo.qrCode %>" alt="Mã QR" style="width: 150px; height: 150px; object-fit: contain; border: 1px solid #ddd;">
        </div>
      <% } %>
    </div>
    <button type="submit" class="btn btn-success">Cập nhật</button>
    <a href="/provider/dashboard" class="btn btn-secondary ms-2">Hủy</a>
  </form>
</body>
</html>